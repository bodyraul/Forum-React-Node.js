{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/aurel/OneDrive/Bureau/projetfinal2/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/aurel/OneDrive/Bureau/projetfinal2/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/aurel/OneDrive/Bureau/projetfinal2/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{useState}from'react';import{useEffect}from'react';import{useParams}from\"react-router-dom\";import axios from'axios';import{useContext}from'react';import{AuthContext}from'../../Context/AuthContext';import\"../messagePost/messageDesPost.css\";import likeNoir from\"../../photo/likeNoir.svg\";import likeVert from\"../../photo/likeVert.svg\";import signaler from\"../../photo/signaler.svg\";import signalerRouge from\"../../photo/signalerRouge.svg\";import Contact from\"../contact/Contact\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function MessagesPost(){var _useParams=useParams(),id=_useParams.id;var _useContext=useContext(AuthContext),token=_useContext.token,settoken=_useContext.settoken;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),errMsgCreationMsg=_useState2[0],seterrMsgCreationMsg=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),valueMsgForm=_useState4[0],setvalueMsgForm=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),post=_useState6[0],setpost=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),allMsg=_useState8[0],setallMsg=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),tailleAllMsg=_useState10[0],settailleAllMsg=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),messageServer=_useState12[0],setmessageServer=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),listeSignalementUser=_useState14[0],setlisteSignalementUser=_useState14[1];var _useState15=useState([]),_useState16=_slicedToArray(_useState15,2),listeLikeUser=_useState16[0],setlisteLikeUser=_useState16[1];var _useState17=useState(0),_useState18=_slicedToArray(_useState17,2),nbLikes=_useState18[0],setnbLikes=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),arriverListeSignalement=_useState20[0],setarriverListeSignalement=_useState20[1];// requete qui permet de créér un message et d'actualiser l'affichage\nvar validerMsgForm=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var config,newMessage;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:config={headers:{Authorization:\"Bearer \".concat(token)}};if(token){_context.next=3;break;}return _context.abrupt(\"return\",seterrMsgCreationMsg(\"Vous devez être connecté pour écrire un message.\"));case 3:if(!(valueMsgForm.length===0)){_context.next=5;break;}return _context.abrupt(\"return\",seterrMsgCreationMsg(\"le message ne peut pas être vide\"));case 5:if(!(valueMsgForm.length>1000)){_context.next=7;break;}return _context.abrupt(\"return\",seterrMsgCreationMsg(\"le message ne peut pas dépasser 1000 caractères\"));case 7:newMessage={};newMessage.contenu=valueMsgForm;_context.next=11;return axios.post(\"/message/creerMessage/\".concat(id),newMessage,config).then(function(res){return console.log(res);}).catch(function(err){return console.log(err);});case 11:_context.next=13;return axios.get(\"/message/afficherMesMessages/\".concat(id),config).then(function(res){setallMsg(res.data);console.log(res.data);}).catch(function(err){return console.log(err);});case 13:seterrMsgCreationMsg(\"message Créé.\");setvalueMsgForm(\"\");case 15:case\"end\":return _context.stop();}}},_callee);}));return function validerMsgForm(){return _ref.apply(this,arguments);};}();//affichage des messages au chargement , du post et des signalements de l'user pour les msg du post\nuseEffect(function(){var config={headers:{Authorization:\"Bearer \".concat(token)}};function messages(){return _messages.apply(this,arguments);}function _messages(){_messages=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.get(\"/message/afficherMesMessages/\".concat(id),config).then(function(res){setallMsg(res.data);}).catch(function(err){return setmessageServer(err.response.data);});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return _messages.apply(this,arguments);}function monPoste(){return _monPoste.apply(this,arguments);}function _monPoste(){_monPoste=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return axios.get(\"/post/monPoste/\".concat(id),config).then(function(res){return setpost(res.data);}).catch(function(err){return console.log(err);});case 2:case\"end\":return _context3.stop();}}},_callee3);}));return _monPoste.apply(this,arguments);}function signalements(){return _signalements.apply(this,arguments);}function _signalements(){_signalements=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return axios.get(\"/signalement/AfficherMessageSignalerParPost/\".concat(id),config).then(function(res){setlisteSignalementUser(res.data);console.log(res.data);}).catch(function(err){return console.log(err);});case 2:case\"end\":return _context4.stop();}}},_callee4);}));return _signalements.apply(this,arguments);}function like(){return _like.apply(this,arguments);}function _like(){_like=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(){return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return axios.get(\"/like/AfficherMessageLikerParPost/\".concat(id),config).then(function(res){console.log(res);setlisteLikeUser(res.data);}).catch(function(err){return console.log(err);});case 2:case\"end\":return _context5.stop();}}},_callee5);}));return _like.apply(this,arguments);}messages();monPoste();signalements();like();},[]);// permet de savoir au chargement combien de messages on a et d'afficher \"aucun message\" s'il n'y en a pas\nuseEffect(function(){if(allMsg.length===0){return settailleAllMsg(false);}if(allMsg.length>0){return settailleAllMsg(true);}},[allMsg]);// on compare ici les id message de la liste message avec l'id message des signalements message de l'utilisateur\n// pour voir les messages qu'il a signalé\nvar messageSignals=function messageSignals(idMsg){for(var k=0;k<=listeSignalementUser.length-1;k++){if(listeSignalementUser[k].idMessage==idMsg){return/*#__PURE__*/_jsxs(\"div\",{className:\"signalement\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Message signal\\xE9\"}),/*#__PURE__*/_jsx(\"img\",{onClick:function onClick(){return supSignalementMessage(idMsg);},src:signalerRouge})]});}}return/*#__PURE__*/_jsxs(\"div\",{className:\"signalement\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Signal\\xE9 message\"}),/*#__PURE__*/_jsx(\"img\",{onClick:function onClick(){return signalerMessage(idMsg);},src:signaler})]});};// requete qui permet de signaler un message\nvar signalerMessage=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee6(idMsg){var config,signal;return _regeneratorRuntime().wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:config={headers:{Authorization:\"Bearer \".concat(token)}};signal={};signal.nom=\"oui\";_context6.next=5;return axios.post(\"/signalement/signalementMessage/\".concat(idMsg),signal,config).then(function(res){}).catch(function(err){return console.log(err);});case 5:_context6.next=7;return axios.get(\"/signalement/AfficherMessageSignalerParPost/\".concat(id),config).then(function(res){setlisteSignalementUser(res.data);}).catch(function(err){return console.log(err);});case 7:case\"end\":return _context6.stop();}}},_callee6);}));return function signalerMessage(_x){return _ref2.apply(this,arguments);};}();// requete qui permet de supprimer le  signalement d'un message\nvar supSignalementMessage=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee7(idMsg){var config;return _regeneratorRuntime().wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:config={headers:{Authorization:\"Bearer \".concat(token)}};_context7.next=3;return axios.delete(\"/signalement/signalementMessage/\".concat(idMsg),config).then(function(res){}).catch(function(err){return console.log(err);});case 3:_context7.next=5;return axios.get(\"/signalement/AfficherMessageSignalerParPost/\".concat(id),config).then(function(res){setlisteSignalementUser(res.data);}).catch(function(err){return console.log(err);});case 5:case\"end\":return _context7.stop();}}},_callee7);}));return function supSignalementMessage(_x2){return _ref3.apply(this,arguments);};}();// on compare ici les id message de la liste message avec l'id message des  message likés de l'utilisateur\n// pour voir les messages qu'il a liké\nvar messageLike=function messageLike(idMsg,nblike){if(listeLikeUser.length===0){return/*#__PURE__*/_jsx(\"div\",{className:\"like\",children:/*#__PURE__*/_jsx(\"img\",{onClick:function onClick(){return creerLike(idMsg);},src:likeNoir})});}for(var k=0;k<=listeLikeUser.length-1;k++){if(listeLikeUser[k].idMessage==idMsg){return/*#__PURE__*/_jsx(\"div\",{className:\"like\",children:/*#__PURE__*/_jsx(\"img\",{onClick:function onClick(){return suppLike(idMsg);},src:likeVert})});}}return/*#__PURE__*/_jsx(\"div\",{className:\"like\",children:/*#__PURE__*/_jsx(\"img\",{onClick:function onClick(){return creerLike(idMsg);},src:likeNoir})});};//permet de créer un like\nvar creerLike=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee8(idMsg){var config,like;return _regeneratorRuntime().wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:config={headers:{Authorization:\"Bearer \".concat(token)}};like={nom:\"oui\"};_context8.next=4;return axios.post(\"/like/creerLike/\".concat(idMsg),like,config).then(function(res){return console.log(res);}).catch(function(err){return console.log(err);});case 4:_context8.next=6;return axios.get(\"/like/AfficherMessageLikerParPost/\".concat(id),config).then(function(res){console.log(res);setlisteLikeUser(res.data);}).catch(function(err){return console.log(err);});case 6:_context8.next=8;return axios.get(\"/message/afficherMesMessages/\".concat(id),config).then(function(res){setallMsg(res.data);console.log(res.data);}).catch(function(err){return console.log(err);});case 8:case\"end\":return _context8.stop();}}},_callee8);}));return function creerLike(_x3){return _ref4.apply(this,arguments);};}();//permet de supprimer un like\nvar suppLike=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee9(idMsg){var config;return _regeneratorRuntime().wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:config={headers:{Authorization:\"Bearer \".concat(token)}};_context9.next=3;return axios.delete(\"/like/supprimerLike/\".concat(idMsg),config).then(function(res){return console.log(res);}).catch(function(err){return console.log(err);});case 3:_context9.next=5;return axios.get(\"/like/AfficherMessageLikerParPost/\".concat(id),config).then(function(res){console.log(res);setlisteLikeUser(res.data);}).catch(function(err){return console.log(err);});case 5:_context9.next=7;return axios.get(\"/message/afficherMesMessages/\".concat(id),config).then(function(res){setallMsg(res.data);console.log(res.data);}).catch(function(err){return console.log(err);});case 7:case\"end\":return _context9.stop();}}},_callee9);}));return function suppLike(_x4){return _ref5.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"presentationPost\",children:[/*#__PURE__*/_jsx(\"p\",{children:post.titre}),/*#__PURE__*/_jsx(\"p\",{children:post.categorie}),/*#__PURE__*/_jsx(\"p\",{})]}),tailleAllMsg===false?/*#__PURE__*/_jsx(\"p\",{className:\"messageServer\",children:messageServer}):allMsg.map(function(message){return/*#__PURE__*/_jsxs(\"div\",{className:\"allMsgDuPost\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"enteteMsgDuPost\",children:[/*#__PURE__*/_jsx(\"p\",{children:message.pseudoCreateurMessage}),/*#__PURE__*/_jsxs(\"p\",{children:[message.dateCreation,\" \\xE0 \",message.heureCreation]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"contenuMsgDuPost\",children:message.contenu}),/*#__PURE__*/_jsxs(\"div\",{className:\"partieBtnAffichageMsg\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"like\",children:[/*#__PURE__*/_jsx(\"p\",{children:message.nbLike}),messageLike(message._id)]}),messageSignals(message._id)]}),/*#__PURE__*/_jsx(\"div\",{className:\"finDuMsg\"})]},message._id);}),/*#__PURE__*/_jsxs(\"div\",{className:\"creationMsgDuPost\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"message\"}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"textarea\",{value:valueMsgForm,onChange:function onChange(e){return setvalueMsgForm(e.target.value);},className:\"ecrireMsgDuPost\"})}),/*#__PURE__*/_jsx(\"p\",{children:errMsgCreationMsg}),/*#__PURE__*/_jsx(\"button\",{onClick:validerMsgForm,className:\"validerBtnMsgDuPost\",children:\"valider\"})]}),/*#__PURE__*/_jsx(Contact,{})]});}","map":{"version":3,"names":["React","useState","useEffect","useParams","axios","useContext","AuthContext","likeNoir","likeVert","signaler","signalerRouge","Contact","MessagesPost","id","token","settoken","errMsgCreationMsg","seterrMsgCreationMsg","valueMsgForm","setvalueMsgForm","post","setpost","allMsg","setallMsg","tailleAllMsg","settailleAllMsg","messageServer","setmessageServer","listeSignalementUser","setlisteSignalementUser","listeLikeUser","setlisteLikeUser","nbLikes","setnbLikes","arriverListeSignalement","setarriverListeSignalement","validerMsgForm","config","headers","Authorization","length","newMessage","contenu","then","res","console","log","catch","err","get","data","messages","response","monPoste","signalements","like","messageSignals","idMsg","k","idMessage","supSignalementMessage","signalerMessage","signal","nom","delete","messageLike","nblike","creerLike","suppLike","titre","categorie","map","message","pseudoCreateurMessage","dateCreation","heureCreation","nbLike","_id","e","target","value"],"sources":["C:/Users/aurel/OneDrive/Bureau/projetfinal2/client/src/pages/messagePost/MessagesDesPost.js"],"sourcesContent":["import React from 'react';\r\nimport { useState } from 'react';\r\nimport { useEffect } from 'react';\r\nimport { useParams } from \"react-router-dom\";\r\nimport axios from 'axios';\r\nimport { useContext } from 'react';\r\nimport { AuthContext } from '../../Context/AuthContext';\r\nimport \"../messagePost/messageDesPost.css\"\r\nimport likeNoir from\"../../photo/likeNoir.svg\";\r\nimport likeVert from\"../../photo/likeVert.svg\";\r\nimport signaler from\"../../photo/signaler.svg\";\r\nimport signalerRouge from\"../../photo/signalerRouge.svg\";\r\nimport Contact from\"../contact/Contact\"\r\n\r\nexport default function MessagesPost() {\r\n  const {id} = useParams();\r\n  const {token,settoken}  = useContext(AuthContext);\r\n  const [errMsgCreationMsg, seterrMsgCreationMsg] = useState(\"\");\r\n  const [valueMsgForm, setvalueMsgForm] = useState(\"\");\r\n  const [post, setpost] = useState({});\r\n  const [allMsg, setallMsg] = useState([]);\r\n  const [tailleAllMsg, settailleAllMsg] = useState(false);\r\n  const [messageServer, setmessageServer] = useState(\"\");\r\n  const [listeSignalementUser, setlisteSignalementUser] = useState([]);\r\n  const [listeLikeUser, setlisteLikeUser] = useState([]);\r\n  const  [nbLikes, setnbLikes] = useState(0);\r\n  const [arriverListeSignalement, setarriverListeSignalement] = useState(false);\r\n\r\n\r\n  // requete qui permet de créér un message et d'actualiser l'affichage\r\n  const validerMsgForm =async()=>{\r\n    const config = {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    };\r\n\r\n    if(!token){\r\n      return seterrMsgCreationMsg(\"Vous devez être connecté pour écrire un message.\");\r\n    }\r\n    if(valueMsgForm.length===0){\r\n      return seterrMsgCreationMsg(\"le message ne peut pas être vide\");\r\n    }\r\n    if(valueMsgForm.length>1000){\r\n      return seterrMsgCreationMsg(\"le message ne peut pas dépasser 1000 caractères\");\r\n    }\r\n\r\n    const newMessage={};\r\n    newMessage.contenu=valueMsgForm;\r\n\r\n    await axios.post(`/message/creerMessage/${id}`,newMessage,config)\r\n    .then((res)=>console.log(res))\r\n    .catch((err)=>console.log(err));\r\n\r\n    await axios.get(`/message/afficherMesMessages/${id}`,config)\r\n    .then((res)=>{\r\n      setallMsg(res.data);\r\n      console.log(res.data);\r\n    })\r\n    .catch((err)=>console.log(err));\r\n\r\n    seterrMsgCreationMsg(\"message Créé.\");\r\n    setvalueMsgForm(\"\");\r\n  }\r\n\r\n\r\n  //affichage des messages au chargement , du post et des signalements de l'user pour les msg du post\r\n  useEffect(() => {\r\n    const config = {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    };\r\n\r\n    async function messages(){\r\n      await  axios.get(`/message/afficherMesMessages/${id}`,config)\r\n      .then((res)=>{\r\n        setallMsg(res.data);\r\n      })\r\n      .catch((err)=>setmessageServer(err.response.data));\r\n    }\r\n\r\n    async function monPoste(){\r\n      await  axios.get(`/post/monPoste/${id}`,config)\r\n      .then((res)=>setpost(res.data))\r\n      .catch((err)=>console.log(err));\r\n    }\r\n\r\n    async function signalements (){\r\n      await  axios.get(`/signalement/AfficherMessageSignalerParPost/${id}`,config)\r\n      .then((res)=>{\r\n        setlisteSignalementUser(res.data);\r\n        console.log(res.data) ;\r\n      })\r\n      .catch((err)=>console.log(err));\r\n    }\r\n\r\n    async function like (){\r\n      await  axios.get(`/like/AfficherMessageLikerParPost/${id}`,config)\r\n      .then((res)=>{\r\n        console.log(res);\r\n        setlisteLikeUser(res.data);\r\n      })\r\n      .catch((err)=>console.log(err));\r\n    }\r\n\r\n    messages();\r\n    monPoste();\r\n    signalements();\r\n    like();\r\n\r\n  }, [])\r\n\r\n\r\n // permet de savoir au chargement combien de messages on a et d'afficher \"aucun message\" s'il n'y en a pas\r\n  useEffect(() => {\r\n    if(allMsg.length===0){\r\n      return settailleAllMsg(false);\r\n  \r\n    }\r\n    if(allMsg.length>0){\r\n      return settailleAllMsg(true);\r\n    }\r\n\r\n  }, [allMsg])\r\n\r\n  // on compare ici les id message de la liste message avec l'id message des signalements message de l'utilisateur\r\n  // pour voir les messages qu'il a signalé\r\n const messageSignals = (idMsg) =>{\r\n    for(var k=0;k<= listeSignalementUser.length-1;k++){\r\n       if(listeSignalementUser[k].idMessage == idMsg){\r\n         return (\r\n          <div className='signalement'>\r\n            <p>Message signalé</p>\r\n            <img onClick={()=>supSignalementMessage(idMsg)} src={signalerRouge}></img>\r\n          </div>\r\n         )\r\n       }\r\n    }\r\n    return (\r\n      <div className='signalement'>\r\n        <p>Signalé message</p>\r\n        <img onClick={()=>signalerMessage(idMsg)} src={signaler}></img>\r\n      </div>\r\n     )\r\n }\r\n\r\n  \r\n // requete qui permet de signaler un message\r\n const   signalerMessage = async (idMsg) => {\r\n\r\n   const config = {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    };\r\n    const signal ={};\r\n    signal.nom=\"oui\";\r\n\r\n    await axios.post(`/signalement/signalementMessage/${idMsg}`,signal,config)\r\n      .then((res)=>{\r\n       \r\n      })\r\n      .catch((err)=>console.log(err));\r\n      \r\n    await  axios.get(`/signalement/AfficherMessageSignalerParPost/${id}`,config)\r\n    .then((res)=>{\r\n      setlisteSignalementUser(res.data);\r\n    })\r\n    .catch((err)=>console.log(err));\r\n  \r\n }\r\n\r\n // requete qui permet de supprimer le  signalement d'un message\r\n const supSignalementMessage = async (idMsg) => {\r\n\r\n  const config = {\r\n     headers: {\r\n       Authorization: `Bearer ${token}`,\r\n     },\r\n   };\r\n\r\n\r\n   await axios.delete(`/signalement/signalementMessage/${idMsg}`,config)\r\n     .then((res)=>{\r\n      \r\n     })\r\n     .catch((err)=>console.log(err));\r\n     \r\n   await  axios.get(`/signalement/AfficherMessageSignalerParPost/${id}`,config)\r\n   .then((res)=>{\r\n     setlisteSignalementUser(res.data);\r\n   })\r\n   .catch((err)=>console.log(err));\r\n \r\n}\r\n\r\n   // on compare ici les id message de la liste message avec l'id message des  message likés de l'utilisateur\r\n  // pour voir les messages qu'il a liké\r\n  const messageLike = (idMsg,nblike) =>{\r\n    if(listeLikeUser.length === 0){\r\n      return (\r\n        <div className='like'>\r\n          <img onClick={()=>creerLike(idMsg)} src={likeNoir}></img>\r\n        </div>\r\n      )\r\n    }\r\n    for(var k=0;k<= listeLikeUser.length-1;k++){\r\n      if(listeLikeUser[k].idMessage == idMsg){\r\n        return (\r\n          <div className='like'>\r\n            <img onClick={()=>suppLike(idMsg)} src={likeVert}></img>\r\n          </div>\r\n        )\r\n      }\r\n  }\r\n  return (\r\n      <div className='like'>\r\n        <img onClick={()=>creerLike(idMsg)} src={likeNoir}></img>\r\n      </div>\r\n    )\r\n\r\n }\r\n\r\n\r\n //permet de créer un like\r\nconst creerLike = async(idMsg)=>{\r\n\r\n  const config = {\r\n    headers: {\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  };\r\n\r\n  const like= {\r\n    nom:\"oui\",\r\n  };\r\n\r\n  await axios.post(`/like/creerLike/${idMsg}`,like,config)\r\n  .then((res)=>console.log(res))\r\n  .catch((err)=>console.log(err));\r\n  \r\n  await  axios.get(`/like/AfficherMessageLikerParPost/${id}`,config)\r\n      .then((res)=>{\r\n        console.log(res);\r\n        setlisteLikeUser(res.data);\r\n      })\r\n      .catch((err)=>console.log(err));\r\n\r\n  await axios.get(`/message/afficherMesMessages/${id}`,config)\r\n    .then((res)=>{\r\n      setallMsg(res.data);\r\n      console.log(res.data);\r\n    })\r\n    .catch((err)=>console.log(err));\r\n}\r\n\r\n//permet de supprimer un like\r\nconst suppLike = async (idMsg)=>{\r\n  const config = {\r\n    headers: {\r\n      Authorization: `Bearer ${token}`,\r\n    },\r\n  };\r\n\r\n  await axios.delete(`/like/supprimerLike/${idMsg}`,config)\r\n    .then((res)=>console.log(res))\r\n    .catch((err)=>console.log(err));\r\n\r\n  await  axios.get(`/like/AfficherMessageLikerParPost/${id}`,config)\r\n      .then((res)=>{\r\n        console.log(res);\r\n        setlisteLikeUser(res.data);\r\n      })\r\n      .catch((err)=>console.log(err));\r\n  \r\n  await axios.get(`/message/afficherMesMessages/${id}`,config)\r\n    .then((res)=>{\r\n      setallMsg(res.data);\r\n      console.log(res.data);\r\n    })\r\n    .catch((err)=>console.log(err));\r\n  }\r\n\r\n  return (\r\n    <div>\r\n        <div className='presentationPost'>\r\n            <p>\r\n                {post.titre}\r\n            </p>\r\n            <p>\r\n                {post.categorie}\r\n            </p>\r\n            <p>\r\n              \r\n            </p>\r\n        </div>\r\n        {tailleAllMsg === false ? <p className='messageServer'>{messageServer}</p> \r\n        : \r\n        allMsg.map((message)=>{\r\n          return (\r\n            <div key={message._id} className='allMsgDuPost'>\r\n              <div className='enteteMsgDuPost'>\r\n                  <p>\r\n                      {message.pseudoCreateurMessage}\r\n                  </p>\r\n                  <p>\r\n                      {message.dateCreation} à {message.heureCreation}\r\n                  </p>\r\n              </div>\r\n              <div className='contenuMsgDuPost'>\r\n                      {message.contenu}\r\n              </div>\r\n              <div className='partieBtnAffichageMsg'>\r\n                  <div className='like'>\r\n                    <p>{message.nbLike}</p>\r\n                    {messageLike(message._id)}\r\n                  </div>\r\n                 \r\n                  \r\n                  {messageSignals(message._id)}\r\n                  \r\n              </div>\r\n              <div className='finDuMsg'>\r\n           \r\n              </div>\r\n          </div>\r\n          )\r\n        })}\r\n        <div className='creationMsgDuPost'>\r\n            <p>\r\n                message\r\n            </p>\r\n            <p>\r\n                <textarea  value={valueMsgForm} onChange={(e)=>setvalueMsgForm(e.target.value)} className='ecrireMsgDuPost'></textarea>\r\n            </p>\r\n            <p>\r\n                {errMsgCreationMsg}\r\n            </p>\r\n            <button onClick={validerMsgForm} className='validerBtnMsgDuPost'>valider</button>\r\n        </div>\r\n        <Contact/>\r\n    </div>\r\n  )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}