{"ast":null,"code":"import _slicedToArray from\"C:/Users/aurel/OneDrive/Bureau/projetfinal2/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{useEffect}from'react';import{useContext}from'react';import{AuthContext}from\"../../Context/AuthContext\";import axios from\"axios\";import{useState}from'react';import\"./admin.css\";import{useNavigate}from'react-router-dom';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";export default function Admin(){var _useContext=useContext(AuthContext),token=_useContext.token,settoken=_useContext.settoken;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),admin=_useState2[0],setadmin=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),nonAdmin=_useState4[0],setnonAdmin=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),nombreSignalMsg=_useState6[0],setnombreSignalMsg=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),nombreSignalPost=_useState8[0],setnombreSignalPost=_useState8[1];var navigate=useNavigate();useEffect(function(){var config={headers:{Authorization:\"Bearer \".concat(token)}};axios.get(\"/admin\",config).then(function(res){if(res.data!='admin'){return setnonAdmin(\"vous n'avez pas l'autorisation d'acceder à cette page.\");}setadmin(true);}).catch(function(err){return setnonAdmin(err.response.data);});axios.get(\"signalement/nombreMessageSignaler\",config).then(function(res){return setnombreSignalMsg(res.data);}).catch(function(err){return console.log(err);});axios.get(\"signalement/nombrePostSignaler\",config).then(function(res){return setnombreSignalPost(res.data);}).catch(function(err){return console.log(err);});},[]);if(admin){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"linkSignalementAdmin\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){return navigate(\"/admin/signalementPost\");},children:[\"nombre signalements post : \",nombreSignalPost]}),/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){return navigate(\"/admin/signalementMessage\");},children:[\"nombre signalements message :\",nombreSignalMsg]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"texteExplicationAdminPage\",children:\"Bienvenue sur la page d'admin. Vous pouvez acc\\xE9der aux signalements, que ce soit pour un post ou un message non conforme. Vous pouvez agir en cons\\xE9quence en ayant la possibilit\\xE9 de bannir l'utilisateur, de supprimer les messages ou les post et de supprimer les signalements. S'il est bannis, l'utilisateur ne pourra alors plus se connecter et ne pourra donc ni cr\\xE9er de post ni de message.Il pourra cependant acc\\xE9der \\xE0 la page d'accueil et voir posts cr\\xE9\\xE9s.\"})]});}if(!admin){return/*#__PURE__*/_jsx(\"div\",{className:\"messageNonAdmin\",children:nonAdmin});}}","map":{"version":3,"names":["React","useEffect","useContext","AuthContext","axios","useState","useNavigate","Admin","token","settoken","admin","setadmin","nonAdmin","setnonAdmin","nombreSignalMsg","setnombreSignalMsg","nombreSignalPost","setnombreSignalPost","navigate","config","headers","Authorization","get","then","res","data","catch","err","response","console","log"],"sources":["C:/Users/aurel/OneDrive/Bureau/projetfinal2/client/src/pages/Admin/Admin.jsx"],"sourcesContent":["import React from 'react'\r\nimport { useEffect } from 'react'\r\nimport { useContext } from 'react';\r\nimport {AuthContext} from \"../../Context/AuthContext\";\r\nimport axios from \"axios\";\r\nimport { useState } from 'react';\r\nimport\"./admin.css\"\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nexport default function Admin() {\r\n\r\n  const {token,settoken}  = useContext(AuthContext);\r\n  const [admin, setadmin] = useState(false);\r\n  const [nonAdmin, setnonAdmin] = useState(\"\");\r\n  const [nombreSignalMsg, setnombreSignalMsg] = useState(\"\");\r\n  const [nombreSignalPost, setnombreSignalPost] = useState(\"\");\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const config = {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    };\r\n\r\n    axios.get(\"/admin\",config)\r\n    .then((res)=>{\r\n      if(res.data != 'admin'){\r\n        return setnonAdmin(\"vous n'avez pas l'autorisation d'acceder à cette page.\")\r\n      }\r\n      setadmin(true);\r\n    \r\n    })\r\n    .catch((err)=>setnonAdmin(err.response.data));\r\n    \r\n    axios.get(\"signalement/nombreMessageSignaler\",config)\r\n    .then((res)=>setnombreSignalMsg(res.data))\r\n    .catch((err)=>console.log(err));\r\n\r\n    axios.get(\"signalement/nombrePostSignaler\",config)\r\n    .then((res)=>setnombreSignalPost(res.data))\r\n    .catch((err)=>console.log(err));\r\n\r\n  }, [])\r\n  \r\n  if(admin){\r\n    return (\r\n      <div>\r\n            <div className='linkSignalementAdmin'>\r\n              <button onClick={()=>navigate(\"/admin/signalementPost\")}>nombre signalements post : {nombreSignalPost}</button>\r\n              <button onClick={()=>navigate(\"/admin/signalementMessage\")}>nombre signalements message :{nombreSignalMsg}</button>\r\n            </div>\r\n            \r\n            <p className='texteExplicationAdminPage'>\r\n              Bienvenue sur la page d'admin. Vous pouvez accéder aux signalements,\r\n              que ce soit pour un post ou un message non conforme. Vous pouvez agir en conséquence en ayant la possibilité de bannir l'utilisateur, de supprimer les messages ou les post et de supprimer les signalements.\r\n              S'il est bannis, l'utilisateur ne pourra alors plus se connecter et ne pourra donc ni créer de post ni de message.Il pourra cependant accéder à la page d'accueil et voir posts créés.\r\n             </p>\r\n      </div>\r\n    )\r\n  }\r\n    if(!admin){\r\n      return(\r\n          <div className='messageNonAdmin'>\r\n              {nonAdmin}\r\n          </div>\r\n        )\r\n    \r\n  }\r\n}\r\n"],"mappings":"wIAAA,MAAOA,MAAK,KAAM,OAAO,CACzB,OAASC,SAAS,KAAQ,OAAO,CACjC,OAASC,UAAU,KAAQ,OAAO,CAClC,OAAQC,WAAW,KAAO,2BAA2B,CACrD,MAAOC,MAAK,KAAM,OAAO,CACzB,OAASC,QAAQ,KAAQ,OAAO,CAChC,MAAM,aAAa,CACnB,OAASC,WAAW,KAAQ,kBAAkB,CAAC,wFAE/C,cAAe,SAASC,MAAK,EAAG,CAE9B,gBAA0BL,UAAU,CAACC,WAAW,CAAC,CAA1CK,KAAK,aAALA,KAAK,CAACC,QAAQ,aAARA,QAAQ,CACrB,cAA0BJ,QAAQ,CAAC,KAAK,CAAC,wCAAlCK,KAAK,eAAEC,QAAQ,eACtB,eAAgCN,QAAQ,CAAC,EAAE,CAAC,yCAArCO,QAAQ,eAAEC,WAAW,eAC5B,eAA8CR,QAAQ,CAAC,EAAE,CAAC,yCAAnDS,eAAe,eAAEC,kBAAkB,eAC1C,eAAgDV,QAAQ,CAAC,EAAE,CAAC,yCAArDW,gBAAgB,eAAEC,mBAAmB,eAC5C,GAAMC,SAAQ,CAAGZ,WAAW,EAAE,CAE9BL,SAAS,CAAC,UAAM,CACd,GAAMkB,OAAM,CAAG,CACbC,OAAO,CAAE,CACPC,aAAa,kBAAYb,KAAK,CAChC,CACF,CAAC,CAEDJ,KAAK,CAACkB,GAAG,CAAC,QAAQ,CAACH,MAAM,CAAC,CACzBI,IAAI,CAAC,SAACC,GAAG,CAAG,CACX,GAAGA,GAAG,CAACC,IAAI,EAAI,OAAO,CAAC,CACrB,MAAOZ,YAAW,CAAC,wDAAwD,CAAC,CAC9E,CACAF,QAAQ,CAAC,IAAI,CAAC,CAEhB,CAAC,CAAC,CACDe,KAAK,CAAC,SAACC,GAAG,QAAGd,YAAW,CAACc,GAAG,CAACC,QAAQ,CAACH,IAAI,CAAC,GAAC,CAE7CrB,KAAK,CAACkB,GAAG,CAAC,mCAAmC,CAACH,MAAM,CAAC,CACpDI,IAAI,CAAC,SAACC,GAAG,QAAGT,mBAAkB,CAACS,GAAG,CAACC,IAAI,CAAC,GAAC,CACzCC,KAAK,CAAC,SAACC,GAAG,QAAGE,QAAO,CAACC,GAAG,CAACH,GAAG,CAAC,GAAC,CAE/BvB,KAAK,CAACkB,GAAG,CAAC,gCAAgC,CAACH,MAAM,CAAC,CACjDI,IAAI,CAAC,SAACC,GAAG,QAAGP,oBAAmB,CAACO,GAAG,CAACC,IAAI,CAAC,GAAC,CAC1CC,KAAK,CAAC,SAACC,GAAG,QAAGE,QAAO,CAACC,GAAG,CAACH,GAAG,CAAC,GAAC,CAEjC,CAAC,CAAE,EAAE,CAAC,CAEN,GAAGjB,KAAK,CAAC,CACP,mBACE,oCACM,aAAK,SAAS,CAAC,sBAAsB,wBACnC,gBAAQ,OAAO,CAAE,yBAAIQ,SAAQ,CAAC,wBAAwB,CAAC,EAAC,yCAA6BF,gBAAgB,GAAU,cAC/G,gBAAQ,OAAO,CAAE,yBAAIE,SAAQ,CAAC,2BAA2B,CAAC,EAAC,2CAA+BJ,eAAe,GAAU,GAC/G,cAEN,UAAG,SAAS,CAAC,2BAA2B,+eAInC,GACL,CAEV,CACE,GAAG,CAACJ,KAAK,CAAC,CACR,mBACI,YAAK,SAAS,CAAC,iBAAiB,UAC3BE,QAAQ,EACP,CAGd,CACF"},"metadata":{},"sourceType":"module"}