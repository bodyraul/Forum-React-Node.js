{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\aurel\\\\OneDrive\\\\Bureau\\\\projetfinal2\\\\client\\\\src\\\\pages\\\\Admin\\\\Admin.jsx\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { useEffect } from 'react';\nimport { useContext } from 'react';\nimport { AuthContext } from \"../../Context/AuthContext\";\nimport axios from \"axios\";\nimport { useState } from 'react';\nimport \"./admin.css\";\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Admin() {\n  _s();\n  const {\n    token,\n    settoken\n  } = useContext(AuthContext);\n  const [admin, setadmin] = useState(false);\n  const [nonAdmin, setnonAdmin] = useState(\"\");\n  const [nombreSignalMsg, setnombreSignalMsg] = useState(\"\");\n  const [nombreSignalPost, setnombreSignalPost] = useState(\"\");\n  const navigate = useNavigate();\n  useEffect(() => {\n    const config = {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    };\n    axios.get(\"/admin\", config).then(res => {\n      if (res.data != 'admin') {\n        return setnonAdmin(\"vous n'avez pas l'autorisation d'acceder à cette page.\");\n      }\n      setadmin(true);\n    }).catch(err => setnonAdmin(err.response.data));\n    axios.get(\"signalement/nombreMessageSignaler\", config).then(res => setnombreSignalMsg(res.data)).catch(err => console.log(err));\n    axios.get(\"signalement/nombrePostSignaler\", config).then(res => setnombreSignalPost(res.data)).catch(err => console.log(err));\n  }, []);\n  if (admin) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"linkSignalementAdmin\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => navigate(\"/admin/signalementPost\"),\n          children: [\"nombre signalements post : \", nombreSignalPost]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => navigate(\"/admin/signalementMessage\"),\n          children: [\"nombre signalements message :\", nombreSignalMsg]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"texteExplicationAdminPage\",\n        children: \"Bienvenue sur la page d'admin. Vous pouvez acc\\xE9der aux signalements, que ce soit pour un post ou un message non conforme. Vous pouvez agir en cons\\xE9quence en ayant la possibilit\\xE9 de bannir l'utilisateur, de supprimer les messages ou les post et de supprimer les signalements. S'il est bannis, l'utilisateur ne pourra alors plus se connecter et ne pourra donc ni cr\\xE9er de post ni de message.Il pourra cependant acc\\xE9der \\xE0 la page d'accueil et voir les messages et posts cr\\xE9\\xE9s.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this);\n  }\n  if (!admin) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"messageNonAdmin\",\n      children: nonAdmin\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 11\n    }, this);\n  }\n}\n_s(Admin, \"s2REN2oDGxdxkRjzx63WDq/taKk=\", false, function () {\n  return [useNavigate];\n});\n_c = Admin;\nvar _c;\n$RefreshReg$(_c, \"Admin\");","map":{"version":3,"names":["React","useEffect","useContext","AuthContext","axios","useState","useNavigate","Admin","token","settoken","admin","setadmin","nonAdmin","setnonAdmin","nombreSignalMsg","setnombreSignalMsg","nombreSignalPost","setnombreSignalPost","navigate","config","headers","Authorization","get","then","res","data","catch","err","response","console","log"],"sources":["C:/Users/aurel/OneDrive/Bureau/projetfinal2/client/src/pages/Admin/Admin.jsx"],"sourcesContent":["import React from 'react'\r\nimport { useEffect } from 'react'\r\nimport { useContext } from 'react';\r\nimport {AuthContext} from \"../../Context/AuthContext\";\r\nimport axios from \"axios\";\r\nimport { useState } from 'react';\r\nimport\"./admin.css\"\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nexport default function Admin() {\r\n\r\n  const {token,settoken}  = useContext(AuthContext);\r\n  const [admin, setadmin] = useState(false);\r\n  const [nonAdmin, setnonAdmin] = useState(\"\");\r\n  const [nombreSignalMsg, setnombreSignalMsg] = useState(\"\");\r\n  const [nombreSignalPost, setnombreSignalPost] = useState(\"\");\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const config = {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    };\r\n\r\n    axios.get(\"/admin\",config)\r\n    .then((res)=>{\r\n      if(res.data != 'admin'){\r\n        return setnonAdmin(\"vous n'avez pas l'autorisation d'acceder à cette page.\")\r\n      }\r\n      setadmin(true);\r\n    \r\n    })\r\n    .catch((err)=>setnonAdmin(err.response.data));\r\n    \r\n    axios.get(\"signalement/nombreMessageSignaler\",config)\r\n    .then((res)=>setnombreSignalMsg(res.data))\r\n    .catch((err)=>console.log(err));\r\n\r\n    axios.get(\"signalement/nombrePostSignaler\",config)\r\n    .then((res)=>setnombreSignalPost(res.data))\r\n    .catch((err)=>console.log(err));\r\n\r\n  }, [])\r\n  \r\n  if(admin){\r\n    return (\r\n      <div>\r\n            <div className='linkSignalementAdmin'>\r\n              <button onClick={()=>navigate(\"/admin/signalementPost\")}>nombre signalements post : {nombreSignalPost}</button>\r\n              <button onClick={()=>navigate(\"/admin/signalementMessage\")}>nombre signalements message :{nombreSignalMsg}</button>\r\n            </div>\r\n            \r\n            <p className='texteExplicationAdminPage'>\r\n              Bienvenue sur la page d'admin. Vous pouvez accéder aux signalements,\r\n              que ce soit pour un post ou un message non conforme. Vous pouvez agir en conséquence en ayant la possibilité de bannir l'utilisateur, de supprimer les messages ou les post et de supprimer les signalements.\r\n              S'il est bannis, l'utilisateur ne pourra alors plus se connecter et ne pourra donc ni créer de post ni de message.Il pourra cependant accéder à la page d'accueil et voir les messages et posts créés.\r\n             </p>\r\n      </div>\r\n    )\r\n  }\r\n    if(!admin){\r\n      return(\r\n          <div className='messageNonAdmin'>\r\n              {nonAdmin}\r\n          </div>\r\n        )\r\n    \r\n  }\r\n}\r\n"],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,SAAS,QAAQ,OAAO;AACjC,SAASC,UAAU,QAAQ,OAAO;AAClC,SAAQC,WAAW,QAAO,2BAA2B;AACrD,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,QAAQ,QAAQ,OAAO;AAChC,OAAM,aAAa;AACnB,SAASC,WAAW,QAAQ,kBAAkB;AAAC;AAE/C,eAAe,SAASC,KAAK,GAAG;EAAA;EAE9B,MAAM;IAACC,KAAK;IAACC;EAAQ,CAAC,GAAIP,UAAU,CAACC,WAAW,CAAC;EACjD,MAAM,CAACO,KAAK,EAAEC,QAAQ,CAAC,GAAGN,QAAQ,CAAC,KAAK,CAAC;EACzC,MAAM,CAACO,QAAQ,EAAEC,WAAW,CAAC,GAAGR,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACS,eAAe,EAAEC,kBAAkB,CAAC,GAAGV,QAAQ,CAAC,EAAE,CAAC;EAC1D,MAAM,CAACW,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGZ,QAAQ,CAAC,EAAE,CAAC;EAC5D,MAAMa,QAAQ,GAAGZ,WAAW,EAAE;EAE9BL,SAAS,CAAC,MAAM;IACd,MAAMkB,MAAM,GAAG;MACbC,OAAO,EAAE;QACPC,aAAa,EAAG,UAASb,KAAM;MACjC;IACF,CAAC;IAEDJ,KAAK,CAACkB,GAAG,CAAC,QAAQ,EAACH,MAAM,CAAC,CACzBI,IAAI,CAAEC,GAAG,IAAG;MACX,IAAGA,GAAG,CAACC,IAAI,IAAI,OAAO,EAAC;QACrB,OAAOZ,WAAW,CAAC,wDAAwD,CAAC;MAC9E;MACAF,QAAQ,CAAC,IAAI,CAAC;IAEhB,CAAC,CAAC,CACDe,KAAK,CAAEC,GAAG,IAAGd,WAAW,CAACc,GAAG,CAACC,QAAQ,CAACH,IAAI,CAAC,CAAC;IAE7CrB,KAAK,CAACkB,GAAG,CAAC,mCAAmC,EAACH,MAAM,CAAC,CACpDI,IAAI,CAAEC,GAAG,IAAGT,kBAAkB,CAACS,GAAG,CAACC,IAAI,CAAC,CAAC,CACzCC,KAAK,CAAEC,GAAG,IAAGE,OAAO,CAACC,GAAG,CAACH,GAAG,CAAC,CAAC;IAE/BvB,KAAK,CAACkB,GAAG,CAAC,gCAAgC,EAACH,MAAM,CAAC,CACjDI,IAAI,CAAEC,GAAG,IAAGP,mBAAmB,CAACO,GAAG,CAACC,IAAI,CAAC,CAAC,CAC1CC,KAAK,CAAEC,GAAG,IAAGE,OAAO,CAACC,GAAG,CAACH,GAAG,CAAC,CAAC;EAEjC,CAAC,EAAE,EAAE,CAAC;EAEN,IAAGjB,KAAK,EAAC;IACP,oBACE;MAAA,wBACM;QAAK,SAAS,EAAC,sBAAsB;QAAA,wBACnC;UAAQ,OAAO,EAAE,MAAIQ,QAAQ,CAAC,wBAAwB,CAAE;UAAA,0CAA6BF,gBAAgB;QAAA;UAAA;UAAA;UAAA;QAAA,QAAU,eAC/G;UAAQ,OAAO,EAAE,MAAIE,QAAQ,CAAC,2BAA2B,CAAE;UAAA,4CAA+BJ,eAAe;QAAA;UAAA;UAAA;UAAA;QAAA,QAAU;MAAA;QAAA;QAAA;QAAA;MAAA,QAC/G,eAEN;QAAG,SAAS,EAAC,2BAA2B;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QAInC;IAAA;MAAA;MAAA;MAAA;IAAA,QACL;EAEV;EACE,IAAG,CAACJ,KAAK,EAAC;IACR,oBACI;MAAK,SAAS,EAAC,iBAAiB;MAAA,UAC3BE;IAAQ;MAAA;MAAA;MAAA;IAAA,QACP;EAGd;AACF;AAAC,GA5DuBL,KAAK;EAAA,QAOVD,WAAW;AAAA;AAAA,KAPNC,KAAK;AAAA;AAAA"},"metadata":{},"sourceType":"module"}